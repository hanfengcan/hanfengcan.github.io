(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{166:function(t,s,e){"use strict";e.r(s);var a=e(0),r=Object(a.a)({},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content"},[t._m(0),t._v(" "),e("p"),t._m(1),e("p"),t._v(" "),t._m(2),t._v(" "),e("p",[e("a",{attrs:{href:"http://aliosthings.io/#/zh-cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("AliOS Things"),e("OutboundLink")],1),t._v("是AliOS去年（2017）发布的物联网操作系统。经过一年的发展，配套的开发环境相对成熟。本文准备简单的介绍在Windows环境下，将alios-things刷入esp32。")]),t._v(" "),e("p",[t._v("开始之前，需要准备几样东西：")]),t._v(" "),e("ul",[e("li",[t._v("vs code")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools",target:"_blank",rel:"noopener noreferrer"}},[t._v("C/C++"),e("OutboundLink")],1),t._v("插件")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://marketplace.visualstudio.com/items?itemName=alios.alios-studio",target:"_blank",rel:"noopener noreferrer"}},[t._v("alios-studio"),e("OutboundLink")],1),t._v("插件")])]),t._v(" "),e("p",[t._v("alios-studio是一个vscode插件，方便使用vscode开发alios-studio应用。由于是C语言，所以还需要C/C++插件支持。")]),t._v(" "),t._m(3),t._v(" "),e("p",[t._v("alios-studio插件还属于快速迭代阶段，安装插件可能需要折腾一下。当然，过程不会很难。如果你的电脑没有安装过python的，则会相对顺利一些。")]),t._v(" "),e("p",[t._v("如果你电脑里有python2和python3也没关系，文章会给出解决办法。")]),t._v(" "),t._m(4),t._v(" "),e("p",[t._v("这里先假设你的电脑没有安装过python。")]),t._v(" "),e("p",[t._v("由于使用到一个基于py2开发的工具，所以需要先安装"),e("a",{attrs:{href:"https://www.python.org/downloads/windows/",target:"_blank",rel:"noopener noreferrer"}},[t._v("python2"),e("OutboundLink")],1),t._v("。必须是python2，因为有些工具不支持python3。")]),t._v(" "),e("p",[t._v("另外，还需要git的客户端。")]),t._v(" "),e("p",[t._v("安装好这两个后，记得设置系统路径。确保可以使用命令行使用py2和git。")]),t._v(" "),e("p",[t._v("接着在vs code的扩展里安装C/C++和alios-stuido。")]),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),e("p",[t._v("到这里，安装基本完成。")]),t._v(" "),t._m(10),t._v(" "),e("p",[t._v("如果你的电脑里面既有py2又有py3。如果你只是将py3配入系统路径，又不想将py2也配入系统路径，那么，建议手动安装aos-cube。")]),t._v(" "),t._m(11),t._v(" "),e("p",[t._v("打开cmd或者cmder执行script目录下面有个activate.bat文件启动py2的虚拟环境。然后安装aos-cube")]),t._v(" "),t._m(12),t._v(" "),e("p",[t._v("安装后，打开vscode。如果插件不会提示安装aos-cube，则说明安装完成。")]),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),e("p",[t._v("在vs code打开源码，可以看到下面的工具条。")]),t._v(" "),t._m(15),t._v(" "),e("p",[t._v("点击放大镜处，选择以esp32作为编译目标的helloworld例子。")]),t._v(" "),e("p",[t._v("点击√来编译源码，第一次编译会下载对应的gcc。")]),t._v(" "),t._m(16),t._v(" "),e("p",[t._v("如果一切顺利的话，你可以看到类似于下图一样的结果。")]),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),e("p",[t._v("写本文的时候，插件的update功能似乎还存在bug。使用的时候提示esptool.py不存在，因为Windows下面是esptool.exe。")]),t._v(" "),e("p",[t._v("一样的，现在cmd或者cmder中启用py2的虚拟环境，然后执行下面的代码。注意路径。")]),t._v(" "),t._m(19),e("p",[t._v("重新排版一下看esptool的option，应该很好理解的。")]),t._v(" "),t._m(20),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),e("p",[t._v("alios-studio这个vscode插件还没有做到完全开箱即用。因为涉及依赖比较多，增加了上手alios-things的门槛。我一开始安装这个插件的时候也遇到困难，多亏插件开发者帮助才用上alios-studio。如果你在安装过程中遇到困，不妨到"),e("a",{attrs:{href:"https://github.com/alibaba/AliOS-Things/issues",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub"),e("OutboundLink")],1),t._v("上面找答案。")]),t._v(" "),e("p",[t._v("后面有空还会介绍如何使用JavaScript开发阿里IOT。")])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"阿里iot快速上手"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#阿里iot快速上手","aria-hidden":"true"}},[this._v("#")]),this._v(" 阿里IOT快速上手")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#初识alios-things"}},[t._v("初识AliOS Things")])]),e("li",[e("a",{attrs:{href:"#安装插件"}},[t._v("安装插件")]),e("ul",[e("li",[e("a",{attrs:{href:"#python-2"}},[t._v("python 2")])]),e("li",[e("a",{attrs:{href:"#python-3"}},[t._v("python 3")])])])]),e("li",[e("a",{attrs:{href:"#第一个工程"}},[t._v("第一个工程")]),e("ul",[e("li",[e("a",{attrs:{href:"#编译完成"}},[t._v("编译完成")])]),e("li",[e("a",{attrs:{href:"#刷入固件"}},[t._v("刷入固件")])]),e("li",[e("a",{attrs:{href:"#最终效果"}},[t._v("最终效果")])])])]),e("li",[e("a",{attrs:{href:"#题外话"}},[t._v("题外话")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"初识alios-things"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#初识alios-things","aria-hidden":"true"}},[this._v("#")]),this._v(" 初识AliOS Things")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"安装插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装插件","aria-hidden":"true"}},[this._v("#")]),this._v(" 安装插件")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"python-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#python-2","aria-hidden":"true"}},[this._v("#")]),this._v(" python 2")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/3379069-36997cc3edf04f01.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"C/C++"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/3379069-7ef40c84e04b86c0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"alios-stuido"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("安装完alios-studio后，插件会提示是否安装aos。点击YES，让插件帮忙安装aos。如果安装成功了，则会在用户目录下产生一个.aos的文件夹"),s("code",[this._v("C:\\Users\\lenovo\\.aos")]),this._v("，类似于这样子的的目录结构：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/3379069-1d2eabda08340fb1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:".aos"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("目录"),s("code",[this._v("python-venv")]),this._v("是py2的虚拟环境，所有aos相关的工具都在目录"),s("code",[this._v(".aos\\python-venv\\Scripts")]),this._v("下。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"python-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#python-3","aria-hidden":"true"}},[this._v("#")]),this._v(" python 3")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("安装需要virtualenv来创建虚拟环境，可以使用"),s("code",[this._v("virtualenv -p D:\\Python27\\python.exe xxx\\.aos\\python-venv")]),this._v("来指定py版本。注意路径。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("pip install aos-cube")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"第一个工程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第一个工程","aria-hidden":"true"}},[this._v("#")]),this._v(" 第一个工程")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("下载alios-things的最新源码"),s("code",[this._v("git clone https://github.com/alibaba/AliOS-Things.git")]),this._v("。仓库比较大，不建议放C盘。也不要使用alios-things studio的create功能创建工程，不然会clone仓库到C盘。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/3379069-02efdc806fd5008b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"image.png"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"编译完成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编译完成","aria-hidden":"true"}},[this._v("#")]),this._v(" 编译完成")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/3379069-f73c52b3cc463a06.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"编译完成"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"刷入固件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#刷入固件","aria-hidden":"true"}},[this._v("#")]),this._v(" 刷入固件")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("esptool --chip esp32 --port COM3 --baud 921600 --before default_reset --after hard_reset write_flash -z --flash_mode dio --flash_freq 40m --flash_size detect 0x1000 F:\\alios-things\\AliOS-Things/platform/mcu/esp32/bsp/bootloader.bin 0x8000 F:\\alios-things\\AliOS-Things/platform/mcu/esp32/bsp/custom_partitions.bin 0x10000 F:\\alios-things\\AliOS-Things/out/helloworld@esp32devkitc/binary/helloworld@esp32devkitc.bin\n")])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-c extra-class"},[e("pre",{pre:!0,attrs:{class:"language-c"}},[e("code",[t._v("esptool \n  "),e("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("chip esp32\n  "),e("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("port COM3\n  "),e("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("baud "),e("span",{attrs:{class:"token number"}},[t._v("921600")]),t._v(" \n  "),e("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("before default_reset \n  "),e("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("after hard_reset write_flash "),e("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("z \n  "),e("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("flash_mode dio \n  "),e("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("flash_freq "),e("span",{attrs:{class:"token number"}},[t._v("40")]),t._v("m \n  "),e("span",{attrs:{class:"token operator"}},[t._v("--")]),t._v("flash_size detect \n    "),e("span",{attrs:{class:"token number"}},[t._v("0x1000")]),t._v(" "),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("platform"),e("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("mcu"),e("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("esp32"),e("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("bsp"),e("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("bootloader"),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bin \n    "),e("span",{attrs:{class:"token number"}},[t._v("0x8000")]),t._v(" "),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("platform"),e("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("mcu"),e("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("esp32"),e("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("bsp"),e("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("custom_partitions"),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bin \n    "),e("span",{attrs:{class:"token number"}},[t._v("0x10000")]),t._v(" "),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("out"),e("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("helloworld@esp32devkitc"),e("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("binary"),e("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("helloworld@esp32devkitc"),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bin\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"最终效果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#最终效果","aria-hidden":"true"}},[this._v("#")]),this._v(" 最终效果")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("刷入固件后，可以使用"),s("code",[this._v("aos monitor COM3 115200")]),this._v("来查看esp32是否正常工作。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/3379069-b739282f6d283a21.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/720",alt:"hello world"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("更多aos命令可以查看"),s("code",[this._v("/.vscode/task.json")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"题外话"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#题外话","aria-hidden":"true"}},[this._v("#")]),this._v(" 题外话")])}],!1,null,null,null);r.options.__file="阿里IOT快速上手.md";s.default=r.exports}}]);